!function(){define("models/ColorModel",["jquery","lodash","backbone"],function(e,t,n){var o=n.Model.extend({defaults:{name:null,value:"#fff",selected:!1,hovered:!1,editMode:!1},initialize:function(e){e.name||this.set("name",e.value)},toggle:function(){this.set("selected",!this.get("selected"))},deselect:function(){this.set("selected",!1)}});return o}),define("collections/PaletteCollection",["jquery","lodash","backbone","models/ColorModel"],function(e,t,n,o){var l=n.Collection.extend({model:o,_singleSelection:!0,_lastSelected:null,initialize:function(){this.listenTo(this,"change:selected",this._deselectOther),e(document).on("keydown",function(e){17===e.which&&this.toggleSingleSelectionMode(!1)}.bind(this)).on("keyup",function(e){17===e.which&&this.toggleSingleSelectionMode(!0)}.bind(this))},_deselectOther:function(e){this._singleSelection&&(this._lastSelected||(this._lastSelected=e),this._lastSelected.cid===e.cid&&(t.invoke(this.without(e),"deselect"),this._lastSelected=null))},toggleSingleSelectionMode:function(e){this._singleSelection=e,n.trigger("single-selection",e)},getSelectionMode:function(){return this._singleSelection}});return l}),define("views/ColorView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({tagName:"span",className:"palette__item",initialize:function(e){this.model=e.model,this.listenTo(this.model,"change:value",this.render),this.listenTo(this.model,"change:name",this.render),this.listenTo(this.model,"change:selected",this._onToggle),this.listenTo(this.model,"change:hovered",this._onHover),this.listenTo(this.model,"destroy",this.destroy)},render:function(){var e=this.$el[0],t=this.model.get("value");return e.style.backgroundColor=t,e.style.color=t,this.model.get("selected")&&this.$el.addClass("palette__item_state_selected"),this.$el},events:{click:function(){this.model.toggle()}},_onToggle:function(){this.$el.toggleClass("palette__item_state_selected",this.model.get("selected"))},_onHover:function(){this.$el.toggleClass("palette__item_state_hovered",this.model.get("hovered"))},destroy:function(){this.undelegateEvents(),this.remove()}});return o}),define("text",["module"],function(e){var t,n,o,l,i,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,p=c&&(location.port||void 0),f={},h=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(o){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,o,l=!1,i=e.lastIndexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!r||i>1)?(t=e.substring(0,i),n=e.substring(i+1)):t=e,o=n||t,i=o.indexOf("!"),-1!==i&&(l="strip"===o.substring(i+1),o=o.substring(0,i),n?n=o:t=o),{moduleName:t,ext:n,strip:l}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,o,l){var i,r,a,s=t.xdRegExp.exec(e);return s?(i=s[2],r=s[3],r=r.split(":"),a=r[1],r=r[0],!(i&&i!==n||r&&r.toLowerCase()!==o.toLowerCase()||(a||r)&&a!==l)):!0},finishLoad:function(e,n,o,l){o=n?t.strip(o):o,h.isBuild&&(f[e]=o),l(o)},load:function(e,n,o,l){if(l&&l.isBuild&&!l.inlineText)return void o();h.isBuild=l&&l.isBuild;var i=t.parseName(e),r=i.moduleName+(i.ext?"."+i.ext:""),a=n.toUrl(r),s=h.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void o():void(!c||s(a,d,u,p)?t.get(a,function(n){t.finishLoad(e,i.strip,n,o)},function(e){o.error&&o.error(e)}):n([r],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,o)}))},write:function(e,n,o,l){if(f.hasOwnProperty(n)){var i=t.jsEscape(f[n]);o.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,o,l,i){var r=t.parseName(n),a=r.ext?"."+r.ext:"",s=r.moduleName+a,c=o.toUrl(r.moduleName+a)+".js";t.load(s,o,function(n){var o=function(e){return l(c,e)};o.asModule=function(e,t){return l.asModule(e,c,t)},t.write(e,s,o,i)},i)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,o){try{var l=n.readFileSync(e,"utf8");"\ufeff"===l[0]&&(l=l.substring(1)),t(l)}catch(i){o&&o(i)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,o,l){var i,r=t.createXhr();if(r.open("GET",e,!0),l)for(i in l)l.hasOwnProperty(i)&&r.setRequestHeader(i.toLowerCase(),l[i]);h.onXhr&&h.onXhr(r,e),r.onreadystatechange=function(t){var l,i;4===r.readyState&&(l=r.status||0,l>399&&600>l?(i=new Error(e+" HTTP status: "+l),i.xhr=r,o&&o(i)):n(r.responseText),h.onXhrComplete&&h.onXhrComplete(r,e))},r.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,o,l="utf-8",i=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),l)),s="";try{for(n=new java.lang.StringBuffer,o=a.readLine(),o&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),null!==o&&n.append(o);null!==(o=a.readLine());)n.append(r),n.append(o);s=String(n.toString())}finally{a.close()}t(s)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,l=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),i="@mozilla.org/windows-registry-key;1"in o,t.get=function(e,t){var n,r,a,s={};i&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=o["@mozilla.org/network/file-input-stream;1"].createInstance(l.nsIFileInputStream),n.init(a,1,0,!1),r=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(l.nsIConverterInputStream),r.init(n,"utf-8",n.available(),l.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),s),r.close(),n.close(),t(s.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),define("text!templates/PaletteTemplate.tpl",[],function(){return'<div class="palette js-palette"></div>\n'}),define("views/PaletteView",["jquery","lodash","backbone","handlebars","views/ColorView","text!templates/PaletteTemplate.tpl"],function(e,t,n,o,l,i){var r=n.View.extend({el:"#palette-placeholder",template:o.compile(i),initialize:function(e){console.info("PaletteView"),this.collection=e.collection,this.listenTo(this.collection,"add",this._onAdd)},render:function(){this.$el.html(this.template),this.collection.each(this._onAdd),this._startSleepAnimation()},_onAdd:function(e){var t=new l({model:e});this.$(".js-palette").append(t.render())},_startSleepAnimation:function(){var e=100*t.random(1,10);setTimeout(function(e){e._selectRandomColor(),e._startSleepAnimation()},e,this)},_selectRandomColor:function(){var e=this.collection.sample();e.set("hovered",!0);var n=100*t.random(5,50);setTimeout(function(){e&&e.set("hovered",!1)},n)}});return r}),define("views/PaletteCountView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({el:"#palette-count",initialize:function(e){console.info("PaletteCountView"),this.collection=e.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render)},render:function(){this.$el.text(this.collection.length)}});return o}),define("text!templates/PaletteAddColorTemplate.tpl",[],function(){return'<div class="palette-add-color">\n    <form action="">\n        <div class="row">\n            <div class="col-xs-5">\n                <label class="sr-only" for="palette-add-color__b=value">\n                    Value\n                </label>\n                <input class="palette-add-color__value js-palette-add-color__value form-control"\n                       id="palette-add-color__value"\n                       value=""\n                       placeholder="#ff0000"\n                       autocomplete="off"\n                       type="text">\n            </div>\n\n            <div class="col-xs-5">\n                <label class="sr-only" for="palette-add-color__name">\n                    Name\n                </label>\n                <input class="palette-add-color__name js-palette-add-color__name form-control"\n                       id="palette-add-color__name"\n                       value=""\n                       placeholder="Red"\n                       autocomplete="off"\n                       type="text">\n            </div>\n\n            <div class="col-xs-2">\n                <button class="palette-add-color__button js-palette-add-color__button btn btn-block btn-default" type="submit">\n                    <span aria-hidden="true" class="glyphicon glyphicon-plus"></span>\n                </button>\n            </div>\n        </div>\n    </form>\n</div>\n'}),define("views/PaletteAddColorView",["jquery","lodash","backbone","handlebars","text!templates/PaletteAddColorTemplate.tpl","tinycolor"],function(e,t,n,o,l,i){var r=n.View.extend({el:"#palette-add-color-placeholder",template:o.compile(l),initialize:function(e){console.info("PaletteAddColorView"),this.collection=e.collection},render:function(){this.$el.html(this.template),this.$value=this.$(".js-palette-add-color__value"),this.$name=this.$(".js-palette-add-color__name")},events:{"submit form":function(e){e.preventDefault(),this._addNewColor()},"keyup .js-palette-add-color__value":function(){this._updateBackBackground()}},_updateBackBackground:function(){var e=i(this._getValue()),t=this.$el.parent(),n="transparent";e.isValid()&&(n=e.toHexString()),t.css({backgroundColor:n})},_addNewColor:function(){var e=i(this._getValue());return e.isValid()?(this.collection.add({value:e.toHexString(),name:this._getName()}),this.$value.val(""),this.$name.val(""),void this._updateBackBackground()):void console.error("Value is not valid")},_getValue:function(){return this.$value.val().trim()},_getName:function(){return this.$name.val().trim()}});return r}),define("text!templates/PaletteSelectedColorsTemplate.tpl",[],function(){return'<div class="palette-selected-colors__scrollbar">\n    <div class="palette-selected-colors">\n    </div>\n</div>\n'}),define("text!templates/PaletteSelectedColorTemplate.tpl",[],function(){return'<div class="palette-selected-color__background"\n     style="background-color: {{ value }}; color: {{ value }}">\n    <span class="palette-selected-color__edit" tabindex="0">\n        edit\n        <span class="glyphicon glyphicon-option-horizontal" aria-hidden="true"></span>\n    </span>\n\n    <span class="palette-selected-color__remove" tabindex="0">\n        destruct\n        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>\n    </span>\n\n    <div class="palette-selected-color__name">\n        {{ name }}\n    </div>\n\n    <div class="palette-selected-color__value">\n        {{ value }}\n    </div>\n</div>\n'}),define("text!templates/PaletteEditColorTemplate.tpl",[],function(){return'<div class="palette-edit-color" style="background-color: {{ value }};">\n    <form action="">\n        <div class="row">\n            <div class="col-xs-5">\n                <label class="sr-only" for="palette-edit-color__b=value">\n                    Value\n                </label>\n                <input class="palette-edit-color__value js-palette-edit-color__value form-control"\n                       id="palette-edit-color__value"\n                       value="{{ value }}"\n                       placeholder="#ff0000"\n                       autocomplete="off"\n                       type="text">\n            </div>\n\n            <div class="col-xs-5">\n                <label class="sr-only" for="palette-edit-color__name">\n                    Name\n                </label>\n                <input class="palette-edit-color__name js-palette-edit-color__name form-control"\n                       id="palette-edit-color__name"\n                       value="{{ name }}"\n                       placeholder="Red"\n                       autocomplete="off"\n                       type="text">\n            </div>\n\n            <div class="col-xs-2">\n                <button class="-palette-edit-color__button js-palette-edit-color__button btn btn-block btn-default" type="submit">\n                    <span aria-hidden="true" class="glyphicon glyphicon-ok"></span>\n                </button>\n            </div>\n        </div>\n    </form>\n</div>\n'}),define("views/PaletteEditColorView",["jquery","lodash","backbone","handlebars","text!templates/PaletteEditColorTemplate.tpl","tinycolor"],function(e,t,n,o,l,i){var r=n.View.extend({tagName:"div",template:o.compile(l),initialize:function(e){console.info("PaletteEditColorView"),this.model=e.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$value=this.$(".js-palette-edit-color__value"),this.$name=this.$(".js-palette-edit-color__name"),this},events:{"submit form":function(e){e.preventDefault(),this._editColor()},"keyup .js-palette-edit-color__value":function(){this._updateBackBackground()}},_updateBackBackground:function(){var e=i(this._getValue()),t=this.$(".palette-edit-color"),n="transparent";e.isValid()&&(n=e.toHexString()),t.css({backgroundColor:n})},_editColor:function(){var e=i(this._getValue());return e.isValid()?(this.model.set("value",e.toHexString()),this.model.set("name",this._getName()),void this.model.set("editMode",!1)):void console.error("Value is not valid")},_getValue:function(){return this.$value.val().trim()},_getName:function(){return this.$name.val().trim()},destroy:function(){this.remove(),this.unbind()}});return r}),define("views/PaletteSelectedColorView",["jquery","lodash","backbone","handlebars","text!templates/PaletteSelectedColorTemplate.tpl","views/PaletteEditColorView"],function(e,t,n,o,l,i){var r=n.View.extend({tagName:"div",className:"palette-selected-color__item",template:o.compile(l),initialize:function(e){console.info("PaletteSelectedColorView"),this.model=e.model,this.listenTo(this.model,"change:editMode",this._onEdit),this.listenTo(this.model,"change:value",this.render),this.listenTo(this.model,"change:name",this.render)},render:function(){return this.model.set("editMode",!1),this.$el.html(this.template({name:this.model.get("name"),value:this.model.get("value")})),this.$el},events:{"click .palette-selected-color__remove":function(){this.model.destroy()},"click .palette-selected-color__edit":function(){this.model.set("editMode",!this.model.get("editMode"))},mouseenter:function(){this.model.set("hovered",!0)},mouseleave:function(){this.model.set("hovered",!1)}},_onEdit:function(){var e=this.model.get("editMode");this.$el.toggleClass("palette-selected-color__item_mode_edit",e),e?this._openEditPanel():this._closeEditPanel()},_openEditPanel:function(){this._editPanel=new i({model:this.model}),this.$el.append(this._editPanel.render().$el)},_closeEditPanel:function(){this._editPanel&&(this._editPanel.destroy(),this._editPanel=null)}});return r}),function(e){"function"==typeof define&&define.amd?define("jqueryPerfectScrollbar",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return"string"==typeof e?parseInt(e,10):~~e}var n={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},o=0,l=function(){var e=o++;return function(t){var n=".perfect-scrollbar-"+e;return void 0===t?n:t+n}},i="WebkitAppearance"in document.documentElement.style;e.fn.perfectScrollbar=function(o,r){return this.each(function(){function a(e,n){var o=e+n,l=M-N;A=0>o?0:o>l?l:o;var i=t(A*(j-M)/(M-N));P.scrollTop(i)}function s(e,n){var o=e+n,l=k-E;$=0>o?0:o>l?l:o;var i=t($*(V-k)/(k-E));P.scrollLeft(i)}function c(e){return x.minScrollbarLength&&(e=Math.max(e,x.minScrollbarLength)),x.maxScrollbarLength&&(e=Math.min(e,x.maxScrollbarLength)),e}function d(){var e={width:X};e.left=B?P.scrollLeft()+k-V:P.scrollLeft(),Y?e.bottom=z-P.scrollTop():e.top=W+P.scrollTop(),H.css(e);var t={top:P.scrollTop(),height:D};J?t.right=B?V-P.scrollLeft()-G-Q.outerWidth():G-P.scrollLeft():t.left=B?P.scrollLeft()+2*k-V-Z-Q.outerWidth():Z+P.scrollLeft(),K.css(t),O.css({left:$,width:E-F}),Q.css({top:A,height:N-ee})}function u(){P.removeClass("ps-active-x"),P.removeClass("ps-active-y"),k=x.includePadding?P.innerWidth():P.width(),M=x.includePadding?P.innerHeight():P.height(),V=P.prop("scrollWidth"),j=P.prop("scrollHeight"),!x.suppressScrollX&&V>k+x.scrollXMarginOffset?(L=!0,X=k-U,E=c(t(X*k/V)),$=t(P.scrollLeft()*(X-E)/(V-k))):(L=!1,E=0,$=0,P.scrollLeft(0)),!x.suppressScrollY&&j>M+x.scrollYMarginOffset?(q=!0,D=M-te,N=c(t(D*M/j)),A=t(P.scrollTop()*(D-N)/(j-M))):(q=!1,N=0,A=0,P.scrollTop(0)),$>=X-E&&($=X-E),A>=D-N&&(A=D-N),d(),L&&P.addClass("ps-active-x"),q&&P.addClass("ps-active-y")}function p(){var t,n,o=function(e){s(t,e.pageX-n),u(),e.stopPropagation(),e.preventDefault()},l=function(){P.removeClass("ps-in-scrolling"),e(R).unbind(I("mousemove"),o)};O.bind(I("mousedown"),function(i){n=i.pageX,t=O.position().left,P.addClass("ps-in-scrolling"),e(R).bind(I("mousemove"),o),e(R).one(I("mouseup"),l),i.stopPropagation(),i.preventDefault()}),t=n=null}function f(){var t,n,o=function(e){a(t,e.pageY-n),u(),e.stopPropagation(),e.preventDefault()},l=function(){P.removeClass("ps-in-scrolling"),e(R).unbind(I("mousemove"),o)};Q.bind(I("mousedown"),function(i){n=i.pageY,t=Q.position().top,P.addClass("ps-in-scrolling"),e(R).bind(I("mousemove"),o),e(R).one(I("mouseup"),l),i.stopPropagation(),i.preventDefault()}),t=n=null}function h(e,t){var n=P.scrollTop();if(0===e){if(!q)return!1;if(0===n&&t>0||n>=j-M&&0>t)return!x.wheelPropagation}var o=P.scrollLeft();if(0===t){if(!L)return!1;if(0===o&&0>e||o>=V-k&&e>0)return!x.wheelPropagation}return!0}function v(e,t){var n=P.scrollTop(),o=P.scrollLeft(),l=Math.abs(e),i=Math.abs(t);if(i>l){if(0>t&&n===j-M||t>0&&0===n)return!x.swipePropagation}else if(l>i&&(0>e&&o===V-k||e>0&&0===o))return!x.swipePropagation;return!0}function m(){function e(e){var t=e.originalEvent.deltaX,n=-1*e.originalEvent.deltaY;return(void 0===t||void 0===n)&&(t=-1*e.originalEvent.wheelDeltaX/6,n=e.originalEvent.wheelDeltaY/6),e.originalEvent.deltaMode&&1===e.originalEvent.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.originalEvent.wheelDelta),[t,n]}function t(t){if(i||!(P.find("select:focus").length>0)){var o=e(t),l=o[0],r=o[1];n=!1,x.useBothWheelAxes?q&&!L?(r?P.scrollTop(P.scrollTop()-r*x.wheelSpeed):P.scrollTop(P.scrollTop()+l*x.wheelSpeed),n=!0):L&&!q&&(l?P.scrollLeft(P.scrollLeft()+l*x.wheelSpeed):P.scrollLeft(P.scrollLeft()-r*x.wheelSpeed),n=!0):(P.scrollTop(P.scrollTop()-r*x.wheelSpeed),P.scrollLeft(P.scrollLeft()+l*x.wheelSpeed)),u(),n=n||h(l,r),n&&(t.stopPropagation(),t.preventDefault())}}var n=!1;void 0!==window.onwheel?P.bind(I("wheel"),t):void 0!==window.onmousewheel&&P.bind(I("mousewheel"),t)}function g(){var t=!1;P.bind(I("mouseenter"),function(){t=!0}),P.bind(I("mouseleave"),function(){t=!1});var n=!1;e(R).bind(I("keydown"),function(o){if((!o.isDefaultPrevented||!o.isDefaultPrevented())&&t){var l=document.activeElement?document.activeElement:R.activeElement;if(l){for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(e(l).is(":input,[contenteditable]"))return}var i=0,r=0;switch(o.which){case 37:i=-30;break;case 38:r=30;break;case 39:i=30;break;case 40:r=-30;break;case 33:r=90;break;case 32:case 34:r=-90;break;case 35:r=o.ctrlKey?-j:-M;break;case 36:r=o.ctrlKey?P.scrollTop():M;break;default:return}P.scrollTop(P.scrollTop()-r),P.scrollLeft(P.scrollLeft()+i),n=h(i,r),n&&o.preventDefault()}})}function b(){function e(e){e.stopPropagation()}Q.bind(I("click"),e),K.bind(I("click"),function(e){var n=t(N/2),o=e.pageY-K.offset().top-n,l=M-N,i=o/l;0>i?i=0:i>1&&(i=1),P.scrollTop((j-M)*i)}),O.bind(I("click"),e),H.bind(I("click"),function(e){var n=t(E/2),o=e.pageX-H.offset().left-n,l=k-E,i=o/l;0>i?i=0:i>1&&(i=1),P.scrollLeft((V-k)*i)})}function w(){function t(){var e=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0};return 0===e.rangeCount?null:e.getRangeAt(0).commonAncestorContainer}function n(){l||(l=setInterval(function(){return C()?(P.scrollTop(P.scrollTop()+i.top),P.scrollLeft(P.scrollLeft()+i.left),void u()):void clearInterval(l)},50))}function o(){l&&(clearInterval(l),l=null),P.removeClass("ps-in-scrolling"),P.removeClass("ps-in-scrolling")}var l=null,i={top:0,left:0},r=!1;e(R).bind(I("selectionchange"),function(){e.contains(P[0],t())?r=!0:(r=!1,o())}),e(window).bind(I("mouseup"),function(){r&&(r=!1,o())}),e(window).bind(I("mousemove"),function(e){if(r){var t={x:e.pageX,y:e.pageY},l=P.offset(),a={left:l.left,right:l.left+P.outerWidth(),top:l.top,bottom:l.top+P.outerHeight()};t.x<a.left+3?(i.left=-5,P.addClass("ps-in-scrolling")):t.x>a.right-3?(i.left=5,P.addClass("ps-in-scrolling")):i.left=0,t.y<a.top+3?(i.top=5>a.top+3-t.y?-5:-20,P.addClass("ps-in-scrolling")):t.y>a.bottom-3?(i.top=5>t.y-a.bottom+3?5:20,P.addClass("ps-in-scrolling")):i.top=0,0===i.top&&0===i.left?o():n()}})}function _(t,n){function o(e,t){P.scrollTop(P.scrollTop()-t),P.scrollLeft(P.scrollLeft()-e),u()}function l(){g=!0}function i(){g=!1}function r(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e.originalEvent}function a(e){var t=e.originalEvent;return t.targetTouches&&1===t.targetTouches.length?!0:t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE?!0:!1}function s(e){if(a(e)){b=!0;var t=r(e);p.pageX=t.pageX,p.pageY=t.pageY,f=(new Date).getTime(),null!==m&&clearInterval(m),e.stopPropagation()}}function c(e){if(!g&&b&&a(e)){var t=r(e),n={pageX:t.pageX,pageY:t.pageY},l=n.pageX-p.pageX,i=n.pageY-p.pageY;o(l,i),p=n;var s=(new Date).getTime(),c=s-f;c>0&&(h.x=l/c,h.y=i/c,f=s),v(l,i)&&(e.stopPropagation(),e.preventDefault())}}function d(){!g&&b&&(b=!1,clearInterval(m),m=setInterval(function(){return C()?.01>Math.abs(h.x)&&.01>Math.abs(h.y)?void clearInterval(m):(o(30*h.x,30*h.y),h.x*=.8,void(h.y*=.8)):void clearInterval(m)},10))}var p={},f=0,h={},m=null,g=!1,b=!1;t&&(e(window).bind(I("touchstart"),l),e(window).bind(I("touchend"),i),P.bind(I("touchstart"),s),P.bind(I("touchmove"),c),P.bind(I("touchend"),d)),n&&(window.PointerEvent?(e(window).bind(I("pointerdown"),l),e(window).bind(I("pointerup"),i),P.bind(I("pointerdown"),s),P.bind(I("pointermove"),c),P.bind(I("pointerup"),d)):window.MSPointerEvent&&(e(window).bind(I("MSPointerDown"),l),e(window).bind(I("MSPointerUp"),i),P.bind(I("MSPointerDown"),s),P.bind(I("MSPointerMove"),c),P.bind(I("MSPointerUp"),d)))}function y(){P.bind(I("scroll"),function(){u()})}function S(){P.unbind(I()),e(window).unbind(I()),e(R).unbind(I()),P.data("perfect-scrollbar",null),P.data("perfect-scrollbar-update",null),P.data("perfect-scrollbar-destroy",null),O.remove(),Q.remove(),H.remove(),K.remove(),P=H=K=O=Q=L=q=k=M=V=j=E=$=z=Y=W=N=A=G=J=Z=B=I=null}function T(){u(),y(),p(),f(),b(),w(),m(),(ne||oe)&&_(ne,oe),x.useKeyboard&&g(),P.data("perfect-scrollbar",P),P.data("perfect-scrollbar-update",u),P.data("perfect-scrollbar-destroy",S)}var x=e.extend(!0,{},n),P=e(this),C=function(){return!!P};if("object"==typeof o?e.extend(!0,x,o):r=o,"update"===r)return P.data("perfect-scrollbar-update")&&P.data("perfect-scrollbar-update")(),P;if("destroy"===r)return P.data("perfect-scrollbar-destroy")&&P.data("perfect-scrollbar-destroy")(),P;if(P.data("perfect-scrollbar"))return P.data("perfect-scrollbar");P.addClass("ps-container");var k,M,V,j,L,E,$,X,q,N,A,D,B="rtl"===P.css("direction"),I=l(),R=this.ownerDocument||document,H=e("<div class='ps-scrollbar-x-rail'>").appendTo(P),O=e("<div class='ps-scrollbar-x'>").appendTo(H),z=t(H.css("bottom")),Y=z===z,W=Y?null:t(H.css("top")),F=t(H.css("borderLeftWidth"))+t(H.css("borderRightWidth")),U=t(H.css("marginLeft"))+t(H.css("marginRight")),K=e("<div class='ps-scrollbar-y-rail'>").appendTo(P),Q=e("<div class='ps-scrollbar-y'>").appendTo(K),G=t(K.css("right")),J=G===G,Z=J?null:t(K.css("left")),ee=t(K.css("borderTopWidth"))+t(K.css("borderBottomWidth")),te=t(K.css("marginTop"))+t(K.css("marginBottom")),ne="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,oe=null!==window.navigator.msMaxTouchPoints;return T(),P})}}),define("views/PaletteSelectedColorsView",["jquery","lodash","backbone","handlebars","text!templates/PaletteSelectedColorsTemplate.tpl","views/PaletteSelectedColorView","jqueryPerfectScrollbar"],function(e,t,n,o,l,i){var r=n.View.extend({el:"#palette-selected-colors-placeholder",template:o.compile(l),initialize:function(e){console.info("PaletteSelectedColorsView"),this.collection=e.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"destroy",this.render),this.listenTo(this.collection,"change:selected",this.render),this.$el.html(this.template),this.$content=this.$(".palette-selected-colors"),this.$(".palette-selected-colors__scrollbar").perfectScrollbar({suppressScrollX:!0,minScrollbarLength:24})},render:function(){this.$content.empty();var e=this.collection.where({selected:!0});t.each(e,function(e){var t=new i({model:e});this.$content.append(t.render())},this)}});return r}),define("views/PaletteSelectedCountView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({el:"#palette-selected-count",initialize:function(e){console.info("PaletteSelectedCountView"),this.collection=e.collection,this.listenTo(this.collection,"change:selected",this.render),this.listenTo(this.collection,"remove",this.render),this.render()},render:function(){this.$el.text(this.collection.where({selected:!0}).length)}});return o}),define("views/PaletteMultiselectView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({el:".palette-multiselect",initialize:function(e){console.info("PaletteCountView"),this.collection=e.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(n,"single-selection",this._changeSelectionMode),this.$checkbox=this.$(".palette-multiselect__checkbox")},render:function(){return 0===this.collection.length?void this.$el.hide():(this.$el.show(),void this._changeSelectionMode(this.collection.getSelectionMode()))},events:{"click .palette-multiselect__checkbox":function(){this.collection.toggleSingleSelectionMode(!this.$checkbox.prop("checked"))}},_changeSelectionMode:function(e){this.$checkbox.prop("checked",!e)}});return o}),define("app",["jquery","lodash","backbone","collections/PaletteCollection","views/PaletteView","views/ColorView","views/PaletteCountView","views/PaletteAddColorView","views/PaletteSelectedColorsView","views/PaletteSelectedCountView","views/PaletteMultiselectView"],function(e,t,n,o,l,i,r,a,s,c,d){var u=function(){var e=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"],n=[];t.times(90,function(){n.push({value:"#"+t.sample(e,6).join("")})}),n.push({name:"FogDog",value:"#f09d09"});var i=new o(n),u=new l({collection:i});u.render();var p=new r({collection:i});p.render();var f=new a({collection:i});f.render();var h=new s({collection:i});h.render();var v=new c({collection:i});v.render();var m=new d({collection:i});m.render()};return{initialize:u}}),define("jquery",[],function(){return window.jQuery}),define("lodash",[],function(){return window._}),define("handlebars",[],function(){return window.Handlebars}),define("backbone",[],function(){return window.Backbone}),define("tinycolor",[],function(){return window.tinycolor}),require(["app"],function(e){e.initialize()}),define("main",function(){}),require(["main"])}();