!function(){define("models/ColorModel",["jquery","lodash","backbone"],function(e,t,n){var o=n.Model.extend({defaults:{name:null,value:"#fff",selected:!1,hovered:!1},initialize:function(e){e.name||this.set("name",e.value)},toggle:function(){this.set("selected",!this.get("selected"))},deselect:function(){this.set("selected",!1)}});return o}),define("collections/PaletteCollection",["jquery","lodash","backbone","models/ColorModel"],function(e,t,n,o){var l=n.Collection.extend({model:o,_singleSelection:!0,_lastSelected:null,initialize:function(){this.listenTo(this,"change:selected",this._deselectOther),e(document).on("keydown",function(e){17===e.which&&this.toggleSingleSelectionMode(!1)}.bind(this)).on("keyup",function(e){17===e.which&&this.toggleSingleSelectionMode(!0)}.bind(this))},_deselectOther:function(e){this._singleSelection&&(this._lastSelected||(this._lastSelected=e),this._lastSelected.cid===e.cid&&(t.invoke(this.without(e),"deselect"),this._lastSelected=null))},toggleSingleSelectionMode:function(e){this._singleSelection=e,n.trigger("single-selection",e)},getSelectionMode:function(){return this._singleSelection}});return l}),define("views/ColorView",["jquery","lodash","backbone","models/ColorModel"],function(e,t,n){var o=n.View.extend({tagName:"span",className:"b-palette__item",initialize:function(e){this.model=e.model,this.listenTo(this.model,"change:selected",this._onToggle),this.listenTo(this.model,"change:hovered",this._onHover)},render:function(){var e=this.$el[0],t=this.model.get("value");return e.style.backgroundColor=t,e.style.color=t,this.$el},events:{click:function(){this.model.toggle()}},_onToggle:function(){this.$el.toggleClass("b-palette__item_state_selected",this.model.get("selected"))},_onHover:function(){this.$el.toggleClass("b-palette__item_state_hovered",this.model.get("hovered"))}});return o}),define("text",["module"],function(e){var t,n,o,l,i,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,p=c&&(location.port||void 0),f={},h=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(o){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,o,l=!1,i=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!r||i>1)?(t=e.substring(0,i),n=e.substring(i+1,e.length)):t=e,o=n||t,i=o.indexOf("!"),-1!==i&&(l="strip"===o.substring(i+1),o=o.substring(0,i),n?n=o:t=o),{moduleName:t,ext:n,strip:l}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,o,l){var i,r,s,a=t.xdRegExp.exec(e);return a?(i=a[2],r=a[3],r=r.split(":"),s=r[1],r=r[0],!(i&&i!==n||r&&r.toLowerCase()!==o.toLowerCase()||(s||r)&&s!==l)):!0},finishLoad:function(e,n,o,l){o=n?t.strip(o):o,h.isBuild&&(f[e]=o),l(o)},load:function(e,n,o,l){if(l&&l.isBuild&&!l.inlineText)return void o();h.isBuild=l&&l.isBuild;var i=t.parseName(e),r=i.moduleName+(i.ext?"."+i.ext:""),s=n.toUrl(r),a=h.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void o():void(!c||a(s,d,u,p)?t.get(s,function(n){t.finishLoad(e,i.strip,n,o)},function(e){o.error&&o.error(e)}):n([r],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,o)}))},write:function(e,n,o){if(f.hasOwnProperty(n)){var l=t.jsEscape(f[n]);o.asModule(e+"!"+n,"define(function () { return '"+l+"';});\n")}},writeFile:function(e,n,o,l,i){var r=t.parseName(n),s=r.ext?"."+r.ext:"",a=r.moduleName+s,c=o.toUrl(r.moduleName+s)+".js";t.load(a,o,function(){var n=function(e){return l(c,e)};n.asModule=function(e,t){return l.asModule(e,c,t)},t.write(e,a,n,i)},i)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,o){try{var l=n.readFileSync(e,"utf8");0===l.indexOf("ï»¿")&&(l=l.substring(1)),t(l)}catch(i){o&&o(i)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,o,l){var i,r=t.createXhr();if(r.open("GET",e,!0),l)for(i in l)l.hasOwnProperty(i)&&r.setRequestHeader(i.toLowerCase(),l[i]);h.onXhr&&h.onXhr(r,e),r.onreadystatechange=function(){var t,l;4===r.readyState&&(t=r.status||0,t>399&&600>t?(l=new Error(e+" HTTP status: "+t),l.xhr=r,o&&o(l)):n(r.responseText),h.onXhrComplete&&h.onXhrComplete(r,e))},r.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,o,l="utf-8",i=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),l)),a="";try{for(n=new java.lang.StringBuffer,o=s.readLine(),o&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),null!==o&&n.append(o);null!==(o=s.readLine());)n.append(r),n.append(o);a=String(n.toString())}finally{s.close()}t(a)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,l=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),i="@mozilla.org/windows-registry-key;1"in o,t.get=function(e,t){var n,r,s,a={};i&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=o["@mozilla.org/network/file-input-stream;1"].createInstance(l.nsIFileInputStream),n.init(s,1,0,!1),r=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(l.nsIConverterInputStream),r.init(n,"utf-8",n.available(),l.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),a),r.close(),n.close(),t(a.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!templates/PaletteTemplate.tpl",[],function(){return'<div class="b-palette js-palette"></div>\n'}),define("views/PaletteView",["jquery","lodash","backbone","handlebars","views/ColorView","text!templates/PaletteTemplate.tpl"],function(e,t,n,o,l,i){var r=n.View.extend({el:"#palette-placeholder",template:o.compile(i),initialize:function(e){console.info("PaletteView"),this.collection=e.collection,this.listenTo(this.collection,"add",this._update),this.listenTo(this.collection,"destroy",this._update),this.render(),this.collection.each(this._onAdd),this._startSleepAnimation()},render:function(){this.$el.html(this.template)},_onAdd:function(e){var t=new l({model:e});this.$(".js-palette").append(t.render())},_update:function(){this.$(".js-palette").empty(),this.collection.each(this._onAdd)},_startSleepAnimation:function(){var e=100*t.random(1,10);setTimeout(function(e){e._selectRandomColor(),e._startSleepAnimation()},e,this)},_selectRandomColor:function(){var e=this.collection.sample();e.set("hovered",!0);var n=100*t.random(5,50);setTimeout(function(){e&&e.set("hovered",!1)},n,this)}});return r}),define("views/PaletteCountView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({el:"#palette-count",initialize:function(e){console.info("PaletteCountView"),this.collection=e.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.render()},render:function(){this.$el.text(this.collection.length)}});return o}),define("text!templates/PaletteAddColorTemplate.tpl",[],function(){return'<div class="b-palette-add-color">\n    <form action="">\n        <div class="row">\n            <div class="col-xs-5">\n                <label class="sr-only" for="palette-add-color__b=value">\n                    Value\n                </label>\n                <input class="b-palette-add-color__value js-palette-add-color__value form-control"\n                       id="palette-add-color__value"\n                       value=""\n                       placeholder="#ff0000"\n                       autocomplete="off"\n                       type="text">\n            </div>\n\n            <div class="col-xs-5">\n                <label class="sr-only" for="palette-add-color__name">\n                    Name\n                </label>\n                <input class="b-palette-add-color__name js-palette-add-color__name form-control"\n                       id="palette-add-color__name"\n                       value=""\n                       placeholder="Red"\n                       autocomplete="off"\n                       type="text">\n            </div>\n\n            <div class="col-xs-2">\n                <button class="b-palette-add-color__button js-palette-add-color__button btn btn-block btn-default" type="submit">\n                    <span aria-hidden="true" class="glyphicon glyphicon-plus"></span>\n                </button>\n            </div>\n        </div>\n    </form>\n</div>\n'}),define("views/PaletteAddColorView",["jquery","lodash","backbone","handlebars","text!templates/PaletteAddColorTemplate.tpl","tinycolor"],function(e,t,n,o,l,i){var r=n.View.extend({el:"#palette-add-color-placeholder",template:o.compile(l),initialize:function(e){console.info("PaletteAddColorView"),this.collection=e.collection,this.render()},render:function(){this.$el.html(this.template),this.$value=this.$(".js-palette-add-color__value"),this.$name=this.$(".js-palette-add-color__name")},events:{"submit form":function(e){e.preventDefault(),this._addNewColor()}},_addNewColor:function(){var e=i(this._getValue());return e.isValid()?(this.collection.add({value:e.toHexString(),name:this._getName()}),this.$value.val(""),void this.$name.val("")):void console.error("Value is not valid")},_getValue:function(){return this.$value.val().trim()},_getName:function(){return this.$name.val().trim()}});return r}),define("text!templates/PaletteSelectedColorsTemplate.tpl",[],function(){return'<div class="b-palette-selected-colors__scrollbar">\n    <div class="b-palette-selected-colors">\n    </div>\n</div>\n'}),define("text!templates/PaletteSelectedColorTemplate.tpl",[],function(){return'<div class="b-palette-selected-color__background"\n     style="background-color: {{ value }}; color: {{ value }}">\n    <span class="b-palette-selected-color__remove" tabindex="0">\n        destruct\n        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>\n    </span>\n\n    <div class="b-palette-selected-color__name">\n        {{ name }}\n    </div>\n\n    <div class="b-palette-selected-color__value">\n        {{ value }}\n    </div>\n</div>\n'}),define("views/PaletteSelectedColorView",["jquery","lodash","backbone","handlebars","text!templates/PaletteSelectedColorTemplate.tpl"],function(e,t,n,o,l){var i=n.View.extend({tagName:"div",className:"b-palette-selected-color__item",template:o.compile(l),initialize:function(e){console.info("PaletteSelectedColorView"),this.model=e.model},render:function(){return this.$el.html(this.template({name:this.model.get("name"),value:this.model.get("value")})),this.$el},events:{"click .b-palette-selected-color__remove":function(){this.model.destroy()}}});return i}),function(e){"function"==typeof define&&define.amd?define("jqueryPerfectScrollbar",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return"string"==typeof e?parseInt(e,10):~~e}var n={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},o=0,l=function(){var e=o++;return function(t){var n=".perfect-scrollbar-"+e;return void 0===t?n:t+n}},i="WebkitAppearance"in document.documentElement.style;e.fn.perfectScrollbar=function(o,r){return this.each(function(){function s(e,n){var o=e+n,l=M-A;D=0>o?0:o>l?l:o;var i=t(D*(j-M)/(M-A));C.scrollTop(i)}function a(e,n){var o=e+n,l=k-X;E=0>o?0:o>l?l:o;var i=t(E*(L-k)/(k-X));C.scrollLeft(i)}function c(e){return x.minScrollbarLength&&(e=Math.max(e,x.minScrollbarLength)),x.maxScrollbarLength&&(e=Math.min(e,x.maxScrollbarLength)),e}function d(){var e={width:$};e.left=R?C.scrollLeft()+k-L:C.scrollLeft(),W?e.bottom=H-C.scrollTop():e.top=B+C.scrollTop(),Y.css(e);var t={top:C.scrollTop(),height:I};J?t.right=R?L-C.scrollLeft()-G-Q.outerWidth():G-C.scrollLeft():t.left=R?C.scrollLeft()+2*k-L-Z-Q.outerWidth():Z+C.scrollLeft(),K.css(t),z.css({left:E,width:X-F}),Q.css({top:D,height:A-et})}function u(){C.removeClass("ps-active-x"),C.removeClass("ps-active-y"),k=x.includePadding?C.innerWidth():C.width(),M=x.includePadding?C.innerHeight():C.height(),L=C.prop("scrollWidth"),j=C.prop("scrollHeight"),!x.suppressScrollX&&L>k+x.scrollXMarginOffset?(V=!0,$=k-U,X=c(t($*k/L)),E=t(C.scrollLeft()*($-X)/(L-k))):(V=!1,X=0,E=0,C.scrollLeft(0)),!x.suppressScrollY&&j>M+x.scrollYMarginOffset?(q=!0,I=M-tt,A=c(t(I*M/j)),D=t(C.scrollTop()*(I-A)/(j-M))):(q=!1,A=0,D=0,C.scrollTop(0)),E>=$-X&&(E=$-X),D>=I-A&&(D=I-A),d(),V&&C.addClass("ps-active-x"),q&&C.addClass("ps-active-y")}function p(){var t,n,o=function(e){a(t,e.pageX-n),u(),e.stopPropagation(),e.preventDefault()},l=function(){C.removeClass("ps-in-scrolling"),e(O).unbind(N("mousemove"),o)};z.bind(N("mousedown"),function(i){n=i.pageX,t=z.position().left,C.addClass("ps-in-scrolling"),e(O).bind(N("mousemove"),o),e(O).one(N("mouseup"),l),i.stopPropagation(),i.preventDefault()}),t=n=null}function f(){var t,n,o=function(e){s(t,e.pageY-n),u(),e.stopPropagation(),e.preventDefault()},l=function(){C.removeClass("ps-in-scrolling"),e(O).unbind(N("mousemove"),o)};Q.bind(N("mousedown"),function(i){n=i.pageY,t=Q.position().top,C.addClass("ps-in-scrolling"),e(O).bind(N("mousemove"),o),e(O).one(N("mouseup"),l),i.stopPropagation(),i.preventDefault()}),t=n=null}function h(e,t){var n=C.scrollTop();if(0===e){if(!q)return!1;if(0===n&&t>0||n>=j-M&&0>t)return!x.wheelPropagation}var o=C.scrollLeft();if(0===t){if(!V)return!1;if(0===o&&0>e||o>=L-k&&e>0)return!x.wheelPropagation}return!0}function v(e,t){var n=C.scrollTop(),o=C.scrollLeft(),l=Math.abs(e),i=Math.abs(t);if(i>l){if(0>t&&n===j-M||t>0&&0===n)return!x.swipePropagation}else if(l>i&&(0>e&&o===L-k||e>0&&0===o))return!x.swipePropagation;return!0}function m(){function e(e){var t=e.originalEvent.deltaX,n=-1*e.originalEvent.deltaY;return(void 0===t||void 0===n)&&(t=-1*e.originalEvent.wheelDeltaX/6,n=e.originalEvent.wheelDeltaY/6),e.originalEvent.deltaMode&&1===e.originalEvent.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.originalEvent.wheelDelta),[t,n]}function t(t){if(i||!(C.find("select:focus").length>0)){var o=e(t),l=o[0],r=o[1];n=!1,x.useBothWheelAxes?q&&!V?(C.scrollTop(r?C.scrollTop()-r*x.wheelSpeed:C.scrollTop()+l*x.wheelSpeed),n=!0):V&&!q&&(C.scrollLeft(l?C.scrollLeft()+l*x.wheelSpeed:C.scrollLeft()-r*x.wheelSpeed),n=!0):(C.scrollTop(C.scrollTop()-r*x.wheelSpeed),C.scrollLeft(C.scrollLeft()+l*x.wheelSpeed)),u(),n=n||h(l,r),n&&(t.stopPropagation(),t.preventDefault())}}var n=!1;void 0!==window.onwheel?C.bind(N("wheel"),t):void 0!==window.onmousewheel&&C.bind(N("mousewheel"),t)}function g(){var t=!1;C.bind(N("mouseenter"),function(){t=!0}),C.bind(N("mouseleave"),function(){t=!1});var n=!1;e(O).bind(N("keydown"),function(o){if((!o.isDefaultPrevented||!o.isDefaultPrevented())&&t){var l=document.activeElement?document.activeElement:O.activeElement;if(l){for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(e(l).is(":input,[contenteditable]"))return}var i=0,r=0;switch(o.which){case 37:i=-30;break;case 38:r=30;break;case 39:i=30;break;case 40:r=-30;break;case 33:r=90;break;case 32:case 34:r=-90;break;case 35:r=o.ctrlKey?-j:-M;break;case 36:r=o.ctrlKey?C.scrollTop():M;break;default:return}C.scrollTop(C.scrollTop()-r),C.scrollLeft(C.scrollLeft()+i),n=h(i,r),n&&o.preventDefault()}})}function b(){function e(e){e.stopPropagation()}Q.bind(N("click"),e),K.bind(N("click"),function(e){var n=t(A/2),o=e.pageY-K.offset().top-n,l=M-A,i=o/l;0>i?i=0:i>1&&(i=1),C.scrollTop((j-M)*i)}),z.bind(N("click"),e),Y.bind(N("click"),function(e){var n=t(X/2),o=e.pageX-Y.offset().left-n,l=k-X,i=o/l;0>i?i=0:i>1&&(i=1),C.scrollLeft((L-k)*i)})}function w(){function t(){var e=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0};return 0===e.rangeCount?null:e.getRangeAt(0).commonAncestorContainer}function n(){l||(l=setInterval(function(){return P()?(C.scrollTop(C.scrollTop()+i.top),C.scrollLeft(C.scrollLeft()+i.left),void u()):void clearInterval(l)},50))}function o(){l&&(clearInterval(l),l=null),C.removeClass("ps-in-scrolling"),C.removeClass("ps-in-scrolling")}var l=null,i={top:0,left:0},r=!1;e(O).bind(N("selectionchange"),function(){e.contains(C[0],t())?r=!0:(r=!1,o())}),e(window).bind(N("mouseup"),function(){r&&(r=!1,o())}),e(window).bind(N("mousemove"),function(e){if(r){var t={x:e.pageX,y:e.pageY},l=C.offset(),s={left:l.left,right:l.left+C.outerWidth(),top:l.top,bottom:l.top+C.outerHeight()};t.x<s.left+3?(i.left=-5,C.addClass("ps-in-scrolling")):t.x>s.right-3?(i.left=5,C.addClass("ps-in-scrolling")):i.left=0,t.y<s.top+3?(i.top=5>s.top+3-t.y?-5:-20,C.addClass("ps-in-scrolling")):t.y>s.bottom-3?(i.top=5>t.y-s.bottom+3?5:20,C.addClass("ps-in-scrolling")):i.top=0,0===i.top&&0===i.left?o():n()}})}function y(t,n){function o(e,t){C.scrollTop(C.scrollTop()-t),C.scrollLeft(C.scrollLeft()-e),u()}function l(){g=!0}function i(){g=!1}function r(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e.originalEvent}function s(e){var t=e.originalEvent;return t.targetTouches&&1===t.targetTouches.length?!0:t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE?!0:!1}function a(e){if(s(e)){b=!0;var t=r(e);p.pageX=t.pageX,p.pageY=t.pageY,f=(new Date).getTime(),null!==m&&clearInterval(m),e.stopPropagation()}}function c(e){if(!g&&b&&s(e)){var t=r(e),n={pageX:t.pageX,pageY:t.pageY},l=n.pageX-p.pageX,i=n.pageY-p.pageY;o(l,i),p=n;var a=(new Date).getTime(),c=a-f;c>0&&(h.x=l/c,h.y=i/c,f=a),v(l,i)&&(e.stopPropagation(),e.preventDefault())}}function d(){!g&&b&&(b=!1,clearInterval(m),m=setInterval(function(){return P()?.01>Math.abs(h.x)&&.01>Math.abs(h.y)?void clearInterval(m):(o(30*h.x,30*h.y),h.x*=.8,void(h.y*=.8)):void clearInterval(m)},10))}var p={},f=0,h={},m=null,g=!1,b=!1;t&&(e(window).bind(N("touchstart"),l),e(window).bind(N("touchend"),i),C.bind(N("touchstart"),a),C.bind(N("touchmove"),c),C.bind(N("touchend"),d)),n&&(window.PointerEvent?(e(window).bind(N("pointerdown"),l),e(window).bind(N("pointerup"),i),C.bind(N("pointerdown"),a),C.bind(N("pointermove"),c),C.bind(N("pointerup"),d)):window.MSPointerEvent&&(e(window).bind(N("MSPointerDown"),l),e(window).bind(N("MSPointerUp"),i),C.bind(N("MSPointerDown"),a),C.bind(N("MSPointerMove"),c),C.bind(N("MSPointerUp"),d)))}function _(){C.bind(N("scroll"),function(){u()})}function S(){C.unbind(N()),e(window).unbind(N()),e(O).unbind(N()),C.data("perfect-scrollbar",null),C.data("perfect-scrollbar-update",null),C.data("perfect-scrollbar-destroy",null),z.remove(),Q.remove(),Y.remove(),K.remove(),C=Y=K=z=Q=V=q=k=M=L=j=X=E=H=W=B=A=D=G=J=Z=R=N=null}function T(){u(),_(),p(),f(),b(),w(),m(),(nt||ot)&&y(nt,ot),x.useKeyboard&&g(),C.data("perfect-scrollbar",C),C.data("perfect-scrollbar-update",u),C.data("perfect-scrollbar-destroy",S)}var x=e.extend(!0,{},n),C=e(this),P=function(){return!!C};if("object"==typeof o?e.extend(!0,x,o):r=o,"update"===r)return C.data("perfect-scrollbar-update")&&C.data("perfect-scrollbar-update")(),C;if("destroy"===r)return C.data("perfect-scrollbar-destroy")&&C.data("perfect-scrollbar-destroy")(),C;if(C.data("perfect-scrollbar"))return C.data("perfect-scrollbar");C.addClass("ps-container");var k,M,L,j,V,X,E,$,q,A,D,I,R="rtl"===C.css("direction"),N=l(),O=this.ownerDocument||document,Y=e("<div class='ps-scrollbar-x-rail'>").appendTo(C),z=e("<div class='ps-scrollbar-x'>").appendTo(Y),H=t(Y.css("bottom")),W=H===H,B=W?null:t(Y.css("top")),F=t(Y.css("borderLeftWidth"))+t(Y.css("borderRightWidth")),U=t(Y.css("marginLeft"))+t(Y.css("marginRight")),K=e("<div class='ps-scrollbar-y-rail'>").appendTo(C),Q=e("<div class='ps-scrollbar-y'>").appendTo(K),G=t(K.css("right")),J=G===G,Z=J?null:t(K.css("left")),et=t(K.css("borderTopWidth"))+t(K.css("borderBottomWidth")),tt=t(K.css("marginTop"))+t(K.css("marginBottom")),nt="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,ot=null!==window.navigator.msMaxTouchPoints;return T(),C})}}),define("views/PaletteSelectedColorsView",["jquery","lodash","backbone","handlebars","text!templates/PaletteSelectedColorsTemplate.tpl","views/PaletteSelectedColorView","jqueryPerfectScrollbar"],function(e,t,n,o,l,i){var r=n.View.extend({el:"#palette-selected-colors-placeholder",template:o.compile(l),initialize:function(e){console.info("PaletteSelectedColorsView"),this.collection=e.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"destroy",this.render),this.listenTo(this.collection,"change:selected",this.render),this.$el.html(this.template),this.$content=this.$(".b-palette-selected-colors"),this.$(".b-palette-selected-colors__scrollbar").perfectScrollbar({suppressScrollX:!0,minScrollbarLength:24}),this.render()},render:function(){this.$content.empty();var e=this.collection.where({selected:!0});t.each(e,function(e){var t=new i({model:e});this.$content.append(t.render())},this)}});return r}),define("views/PaletteSelectedCountView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({el:"#palette-selected-count",initialize:function(e){console.info("PaletteSelectedCountView"),this.collection=e.collection,this.listenTo(this.collection,"change:selected",this.render),this.listenTo(this.collection,"remove",this.render),this.render()},render:function(){this.$el.text(this.collection.where({selected:!0}).length)}});return o}),define("views/PaletteMultiselectView",["jquery","lodash","backbone"],function(e,t,n){var o=n.View.extend({el:".b-palette-multiselect",initialize:function(e){console.info("PaletteCountView"),this.collection=e.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(n,"single-selection",this._changeSelectionMode),this.$checkbox=this.$(".b-palette-multiselect__checkbox"),this.render()},render:function(){return 0===this.collection.length?void this.$el.hide():(this.$el.show(),void this._changeSelectionMode(this.collection.getSelectionMode()))},events:{"click .b-palette-multiselect__checkbox":function(){this.collection.toggleSingleSelectionMode(!this.$checkbox.prop("checked"))}},_changeSelectionMode:function(e){this.$checkbox.prop("checked",!e)}});return o}),define("app",["jquery","lodash","backbone","collections/PaletteCollection","views/PaletteView","views/ColorView","views/PaletteCountView","views/PaletteAddColorView","views/PaletteSelectedColorsView","views/PaletteSelectedCountView","views/PaletteMultiselectView"],function(e,t,n,o,l,i,r,s,a,c,d){var u=function(){var e=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"],n=[];t.times(90,function(){n.push({value:"#"+t.sample(e,6).join("")})}),n.push({name:"FogDog",value:"#f09d09"});{var i=new o(n);new l({collection:i}),new r({collection:i}),new s({collection:i}),new a({collection:i}),new c({collection:i}),new d({collection:i})}};return{initialize:u}}),define("jquery",[],function(){return window.jQuery}),define("lodash",[],function(){return window._}),define("handlebars",[],function(){return window.Handlebars}),define("backbone",[],function(){return window.Backbone}),define("tinycolor",[],function(){return window.tinycolor}),require(["app"],function(e){e.initialize()}),define("main",function(){}),require(["main"])}();